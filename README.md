# BugFind - エンジニア版ワードウルフ

## プロジェクト概要

BugFind は、エンジニアワードをテーマにして一人だけ違うワードを持ったバグを探すゲームです。オフラインイベントや勉強会などで、エンジニア同士の交流を深めるために使用できます。

## ゲーム設定

### 役職一覧

1. **エンジニア（村人）**

   - エンジニアリングワードが配られる
   - バグを見つけることが使命
   - 勝利条件：バグを見つけること

2. **バグ（人狼）**
   - バグに関連するワードが配られる
   - 他のプレイヤーのワードは見れない
   - 勝利条件：バグがバレないこと

### ゲームの流れ

1. **部屋作成・参加フェーズ**

   - ホストが部屋を作成し、一意の部屋 ID が生成される
   - メンバーは部屋 ID を使用して部屋に参加
   - メンバーはニックネームを入力して参加

2. **ゲーム開始フェーズ**

   - 全員が参加したら、ホストがゲーム開始ボタンを押す
   - 全員にワードが配布される（1 人だけバグワード）
   - 各プレイヤーは自分のワードを確認
   - 全員が確認完了（OK）を押すと次のフェーズへ

3. **討論フェーズ（2 分間）**

   - プレイヤーが議論を行い、バグの候補を探る
   - 自分のワードをヒントとして使う
   - 1 分経過で STOP 表示
   - 2 分経過で自動的に投票フェーズへ移行

4. **投票フェーズ**

   - 全プレイヤーのニックネームがリスト表示される
   - 各プレイヤーはバグだと思う人を 1 人選んで投票
   - 全員が投票を完了すると結果画面へ移行

5. **結果表示フェーズ**
   - 全員の投票結果が表示される
   - バグが見つかったかどうかの結果が表示
   - リスタートボタンで同じ部屋で新しいゲームを開始可能

## 技術スタック

- フロントエンド: Next.js + Tailwind CSS
- バックエンド: Supabase
- デプロイ: Vercel

## データベース設計

### rooms テーブル

- id: uuid (PK)
- code: string (6 文字のランダムコード)
- status: enum (waiting, playing, finished)
- phase: enum (discussion, voting)
- created_at: timestamp
- max_players: integer
- current_players: integer
- host_id: string (ホストのセッション ID)
- words: jsonb (ワードの配列)

### players テーブル

- id: uuid (PK)
- session_id: string
- room_id: uuid (FK)
- nickname: string
- role: enum (engineer, bug)
- word: string
- created_at: timestamp

### votes テーブル

- id: uuid (PK)
- room_id: uuid (FK)
- voter_id: uuid (FK)
- target_id: uuid (FK)
- created_at: timestamp

## 開発チェックリスト

### 1. プロジェクトセットアップ

- [ ] Next.js プロジェクトの作成
- [ ] Tailwind CSS のセットアップ
- [ ] Supabase プロジェクトの作成
- [ ] 環境変数の設定

### 2. データベース設計

- [ ] Supabase でテーブルの作成
- [ ] 基本的なクエリのテスト

### 3. 認証・セッション管理

- [ ] 匿名認証の実装
- [ ] セッション管理の実装

### 4. 基本 UI 実装

- [ ] 部屋作成画面
- [ ] 部屋参加画面
- [ ] ゲーム待機画面
- [ ] ゲーム進行画面
- [ ] 結果表示画面

### 5. ゲームロジック実装

- [ ] 部屋コード生成ロジック
- [ ] ワード割り当てロジック
- [ ] 投票システム
- [ ] 勝敗判定ロジック

### 6. テスト・デプロイ

- [ ] 基本的なエラーハンドリング
- [ ] Vercel へのデプロイ
- [ ] 動作確認

## 追加機能（オプション）

- ホスト不在時の自動ホスト移行
- 一定時間の無操作による自動解散
- チャット機能
- カスタムアイコン選択
- ゲーム履歴の保存
